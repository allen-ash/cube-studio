"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[827],{27238:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a=n(29439),s=n(4519),r=n(73031),i=n(10089),l=n(81190),c=n(93849),d=n(88977),u=n(97709),o=n(47474),h=n(10007),m=n(12513),f=n(2704),x=n(42496),Z=n(82574),j=n(72625),p=n(76245),k=n(20011),v=n(37167),y=n(96296),_=n(76722),g=n(92306),w=n(43077),b=n.n(w),C=n(1413),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},S=n(64158),I=function(e,t){return s.createElement(S.Z,(0,C.Z)((0,C.Z)({},e),{},{ref:t,icon:N}))};I.displayName="SyncOutlined";var P=s.forwardRef(I),T=n(17669),Y=n(4316),D=n(38827),H=n(81866),M=n(33405),O=n(17972),A=n(5898),R=n(16548),z=n(5866),E=n(60685),K=n(78306),L=n(2556),V=r.Z.RangePicker;function q(){var e=E.Z.get("myapp_username")||"",t=(0,s.useState)([]),n=(0,a.Z)(t,2),r=n[0],w=n[1],C=(0,s.useState)(!1),N=(0,a.Z)(C,2),S=N[0],I=N[1],q=(0,s.useState)(!1),B=(0,a.Z)(q,2),G=(B[0],B[1],(0,s.useState)(E.Z.get("myapp_username")||void 0)),J=(0,a.Z)(G,2),W=J[0],F=J[1],Q=(0,A.lr)(),U=(0,a.Z)(Q,1)[0].get("taskId"),X=(0,s.useState)(U||""),$=(0,a.Z)(X,2),ee=$[0],te=$[1],ne=(0,s.useState)(),ae=(0,a.Z)(ne,2),se=ae[0],re=ae[1],ie=(0,s.useState)(!1),le=(0,a.Z)(ie,2),ce=(le[0],le[1],(0,s.useState)(!1)),de=(0,a.Z)(ce,2),ue=de[0],oe=de[1],he=(0,s.useState)(!1),me=(0,a.Z)(he,2),fe=me[0],xe=me[1],Ze=(0,s.useState)(!1),je=(0,a.Z)(Ze,2),pe=je[0],ke=je[1],ve=(0,s.useState)(),ye=(0,a.Z)(ve,2),_e=(ye[0],ye[1],(0,s.useState)([])),ge=(0,a.Z)(_e,2),we=ge[0],be=ge[1],Ce=(0,s.useState)([]),Ne=(0,a.Z)(Ce,2),Se=Ne[0],Ie=Ne[1],Pe=(0,s.useState)(""),Te=(0,a.Z)(Pe,2),Ye=Te[0],De=Te[1],He=(0,s.useState)(!1),Me=(0,a.Z)(He,2),Oe=Me[0],Ae=Me[1],Re=(0,s.useState)({startTime:b()().subtract(7,"d").startOf("day").format("YYYY-MM-DD HH:mm:ss"),endTime:b()().subtract(0,"d").endOf("day").format("YYYY-MM-DD HH:mm:ss")}),ze=(0,a.Z)(Re,2),Ee=ze[0],Ke=ze[1],Le={current:1,pageSize:10},Ve=(0,s.useState)(Le),qe=(0,a.Z)(Ve,2),Be=qe[0],Ge=qe[1],Je=(0,s.useState)(""),We=(0,a.Z)(Je,2),Fe=We[0],Qe=We[1];(0,s.useEffect)((function(){Qe((0,R.W9)())}),[]),(0,s.useEffect)((function(){U&&Ue()}),[]);var Ue=function(){I(!0),(0,y.P6)({usTaskId:ee||void 0,inCharge:W||void 0,stateList:""!==se?se:void 0,startTime:Ee.startTime,endTime:Ee.endTime}).then((function(e){var t=e.data.data;w(t[0].desc)})).finally((function(){return I(!1)}))};return(0,L.jsxs)("div",{className:"fade-in",children:[(0,L.jsx)(l.Z,{title:"\u65e5\u5fd7",destroyOnClose:!0,visible:pe,footer:null,width:1700,onCancel:function(){ke(!1)},children:(0,L.jsx)(c.Z,{spinning:Oe,children:(0,L.jsx)("div",{style:{minHeight:300},dangerouslySetInnerHTML:{__html:Ye.replaceAll("style>","style_abandon>")}})})}),(0,L.jsxs)(z.Z,{title:"\u91cd\u8dd1",loading:ue,visible:fe,onCancel:function(){xe(!1)},onCreate:function(t){oe(!0);var n=t.isRedoSubTask,a=t.isCheckParentInstance,s=E.Z.get("myapp_username")||"",r=Se.map((function(e){return{taskId:e.task_id,fromDate:e.cur_run_date,toDate:e.cur_run_date,user:s,param:"".concat(n).concat(a)}}));(0,y.Kz)({list:r,userName:e}).then((function(e){"error"===e.data.state?i.ZP.error(e.data.desc):(i.ZP.success("\u91cd\u8dd1\u6210\u529f"),Ue(),xe(!1))})).catch((function(e){i.ZP.error("\u91cd\u8dd1\u5931\u8d25")})).finally((function(){oe(!1)}))},children:[(0,L.jsx)(d.Z.Item,{label:"\u662f\u5426\u91cd\u8dd1\u5b50\u4efb\u52a1",name:"isRedoSubTask",initialValue:"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}],children:(0,L.jsxs)(u.ZP.Group,{children:[(0,L.jsx)(u.ZP,{value:"1",children:"\u53ea\u91cd\u8dd1\u6240\u9009\u4efb\u52a1\u672c\u8eab"}),(0,L.jsx)(u.ZP,{value:"2",children:"\u91cd\u8dd1\u6240\u9009\u4efb\u52a1\u672c\u8eab\u53ca\u5176\u6240\u6709\u7684\u9012\u5f52\u5b50\u4efb\u52a1"})]})}),(0,L.jsx)(d.Z.Item,{label:"\u662f\u5426\u68c0\u67e5\u7236\u5b9e\u4f8b",name:"isCheckParentInstance",initialValue:"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}],children:(0,L.jsxs)(u.ZP.Group,{children:[(0,L.jsx)(u.ZP,{value:"1",children:"\u662f"}),(0,L.jsx)(u.ZP,{value:"2",children:"\u5426"})]})})]}),(0,L.jsx)(_.Z,{title:"\u5b9e\u4f8b\u8fd0\u884c\u7ba1\u7406"}),(0,L.jsxs)(v.VY,{className:"appmgmt-content",children:[(0,L.jsxs)("div",{className:"d-f plr24 fw",children:[(0,L.jsxs)("div",{className:"mr16 mt24 d-f ac",children:[(0,L.jsx)("span",{className:"s0",style:{width:80},children:"\u4efb\u52a1\u72b6\u6001\uff1a"}),(0,L.jsx)(o.Z,{style:{width:256},options:[{label:"\u5168\u90e8",value:""},{label:"\u6210\u529f",value:2},{label:"\u5931\u8d25",value:3},{label:"\u7ec8\u6b62",value:8},{label:"\u7b49\u5f85\u7236\u4efb\u52a1",value:0},{label:"\u7b49\u5f85\u8d44\u6e90",value:12},{label:"\u6b63\u5728\u8fd0\u884c",value:1}],onChange:function(e){re(e)},placeholder:"\u4efb\u52a1\u72b6\u6001"})]}),(0,L.jsxs)("div",{className:"mr16 mt24 d-f ac",children:[(0,L.jsx)("span",{className:"s0",style:{width:80},children:"\u4efb\u52a1\u540d/Id\uff1a"}),(0,L.jsx)(h.Z,{onPressEnter:function(){Ue()},placeholder:"\u4efb\u52a1\u540d/Id",style:{width:256},value:ee,onChange:function(e){return te(e.target.value)}})]}),(0,L.jsxs)("div",{className:"mr16 mt24 d-f ac",children:[(0,L.jsx)("span",{className:"ta-r s0",style:{width:80},children:"\u8d1f\u8d23\u4eba\uff1a"}),(0,L.jsx)(h.Z,{onPressEnter:function(){Ue()},placeholder:"\u8d1f\u8d23\u4eba/\u82f1\u6587\u540d",style:{width:256},value:W,onChange:function(e){return F(e.target.value)}})]}),(0,L.jsxs)("div",{className:"mr16 mt24 d-f ac",children:[(0,L.jsx)("span",{className:"ta-r s0",style:{width:80},children:"\u6570\u636e\u65f6\u95f4\uff1a"}),(0,L.jsx)(V,{style:{width:256},value:[b()(Ee.startTime),b()(Ee.endTime)],onChange:function(e){if(e&&e.length){var t=(0,a.Z)(e,2),n=t[0],s=t[1];n&&s&&Ke({startTime:n.format("YYYY-MM-DD HH:mm:ss"),endTime:s.format("YYYY-MM-DD HH:mm:ss")})}},disabledDate:function(e){return e&&e>b()().endOf("day")}}),(0,L.jsx)(m.Z,{className:"ml16",type:"primary",onClick:function(){ee||W?Ue():i.ZP.warn("\u4efb\u52a1\u540d/Id\u6216\u8005\u8d1f\u8d23\u4eba\u4e0d\u80fd\u90fd\u4e3a\u7a7a")},children:"\u641c\u7d22"})]})]}),(0,L.jsx)("div",{className:"p16",children:(0,L.jsx)(g.Z,{titleNode:(0,L.jsx)(f.Z,{className:"tablebox-title",children:"\u5b9e\u4f8b\u5217\u8868"}),buttonNode:(0,L.jsx)("div",{children:(0,L.jsx)(x.Z,{overlay:(0,L.jsxs)(Z.Z,{children:[(0,L.jsx)(Z.Z.Item,{children:(0,L.jsx)("span",{className:"link",onClick:function(){Se.length?xe(!0):i.ZP.warn("\u8bf7\u5148\u9009\u62e9")},children:"\u6279\u91cf\u91cd\u8dd1"})}),(0,L.jsx)(Z.Z.Item,{children:(0,L.jsx)("span",{className:"link",onClick:function(){Se.length?xe(!0):i.ZP.warn("\u8bf7\u5148\u9009\u62e9")},children:"\u6279\u91cf\u7ec8\u6b62"})})]}),children:(0,L.jsxs)(m.Z,{type:"primary",children:["\u6279\u91cf\u64cd\u4f5c ",(0,L.jsx)(T.Z,{})]})})}),rowKey:function(e){return e.rowKey},columns:[{title:"\u4efb\u52a1",dataIndex:"task_name",key:"task_name",width:400,fixed:"left",render:function(e,t){return(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{className:"pb4 link",children:t.task_name}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{className:"pr4",children:t.task_id}),(0,L.jsx)(O.CopyToClipboard,{text:t.task_id,onCopy:function(){i.ZP.success("\u5df2\u6210\u529f\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,L.jsx)(Y.Z,{})})]})]})}},{title:"\u6570\u636e\u542f\u59cb\u65f6\u95f4",dataIndex:"cur_run_date",key:"cur_run_date",width:220,sorter:function(e,t){return new Date(e.cur_run_date).valueOf()-new Date(t.cur_run_date).valueOf()}},{title:"\u5b9e\u4f8b\u6267\u884c\u65f6\u95f4",dataIndex:"start_time",key:"start_time",width:220,render:function(e,t){return(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{children:t.start_time}),(0,L.jsx)("div",{children:t.end_time})]})}},{title:"\u6267\u884c\u65f6\u957f",dataIndex:"span",key:"span",width:150},{title:"\u72b6\u6001",dataIndex:"state",key:"state",width:150,render:function(e,t){switch(t.state){case"0":case"1":case"12":return(0,L.jsx)(j.Z,{icon:(0,L.jsx)(P,{spin:!0}),color:"processing",children:K.nk[t.state]});case"2":return(0,L.jsx)(j.Z,{icon:(0,L.jsx)(D.Z,{}),color:"success",children:K.nk[t.state]});case"3":return(0,L.jsx)(j.Z,{icon:(0,L.jsx)(H.Z,{}),color:"error",children:K.nk[t.state]});case"5":case"11":return(0,L.jsx)(j.Z,{icon:(0,L.jsx)(M.Z,{}),color:"warning",children:K.nk[t.state]});default:return(0,L.jsx)(j.Z,{color:"default",children:K.nk[t.state]})}}},{title:"\u8d1f\u8d23\u4eba",dataIndex:"in_charge",key:"in_charge",width:300,render:function(e,t){return(0,L.jsx)(p.Z,{title:t.in_charge,placement:"topLeft",children:(0,L.jsx)("div",{className:"ellip1",children:t.in_charge})})}},{title:"\u5c1d\u8bd5\u6b21\u6570",dataIndex:"try_limit",key:"try_limit",width:150,render:function(e,t){return(0,L.jsxs)("span",{children:[t.tries," / ",t.try_limit]})}},{title:"\u64cd\u4f5c",width:150,dataIndex:"handle",key:"handle",align:"right",fixed:"right",render:function(e,t){return(0,L.jsxs)(k.Z,{size:"middle",children:[(0,L.jsx)("span",{className:"link",onClick:function(){De(""),ke(!0),Ae(!0),(0,y.t_)({taskId:t.task_id,curRunDate:(t.cur_run_date||"").replaceAll("-","").replaceAll(":","").replaceAll(" ","")}).then((function(e){console.log(e.data),e.data&&De(e.data)})).finally((function(){Ae(!1)}))},children:"\u65e5\u5fd7"}),(0,L.jsx)("span",{className:"link",onClick:function(){Ie([t]),be([t.rowKey]),xe(!0)},children:"\u91cd\u8dd1"}),(0,L.jsx)("span",{className:"link",onClick:function(){var e=E.Z.get("myapp_username")||"";l.Z.confirm({title:"\u7ec8\u6b62",icon:(0,L.jsx)(M.Z,{}),content:"\u786e\u5b9a\u7ec8\u6b62\u6539\u6807\u7b7e?",okText:"\u786e\u8ba4\u7ec8\u6b62",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:function(){return new Promise((function(n,a){(0,y.rJ)({taskId:t.task_id,fromDate:t.cur_run_date,toDate:t.cur_run_date,user:e}).then((function(e){n("")})).catch((function(e){a()}))})).then((function(e){i.ZP.success("\u7ec8\u6b62\u6210\u529f"),Ue()})).catch((function(){i.ZP.error("\u7ec8\u6b62\u5931\u8d25")}))},onCancel:function(){}})},children:"\u7ec8\u6b62"})]})}}],loading:S,pagination:Be,dataSource:r,onChange:function(e){Ge(e)},rowSelection:{type:"checkbox",selectedRowKeys:we,onChange:function(e,t){be(e),Ie(t)}},scroll:{x:1200,y:Fe}})})]})]})}}}]);
//# sourceMappingURL=827.3b4b592f.chunk.js.map
"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[672],{7672:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var a=t(3433),r=t(4942),i=t(1413),c=t(9439),o=t(4519),l=t(6245),s=t(11),u=t(2496),d=t(2574),f=t(89),m=t(6874),h=t(9775),p=t(1449),Z=t(6609),v=t(3849),x=t(5492),j=t(2704),g=t(2513),y=t(7167),b=t(2577),S=t(2556),k=b.Z.Title,_=function(e){var n={position:"sticky",top:0};return(0,S.jsxs)(x.Z,{className:"title-header",justify:"space-between",align:"middle",style:e.noBorderBottom?(0,i.Z)({borderBottom:"none"},n):n,children:[(0,S.jsxs)("div",{children:[(0,S.jsx)(k,{className:"d-il mr12",level:5,style:{marginBottom:10},children:e.title}),(0,S.jsx)("div",{className:"d-il",children:e.breadcrumbs})]}),(0,S.jsx)(j.Z,{children:(0,S.jsx)(s.Z,{children:e.children?e.children:null})})]})},w=t(4925),C=t(8532),N=t(575),O=t(5738),I=t(6724),P=t(602),T=t(4520),E=t.n(T),M=t(4308),z=["onResize","width"],H=t(7972),F=function(){return(0,S.jsxs)(x.Z,{justify:"center",align:"middle",style:{height:360,flexDirection:"column"},children:[(0,S.jsx)("img",{src:P,style:{width:266},alt:""}),(0,S.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})]})},R=function(e){var n=e.onResize,t=e.width,a=(0,w.Z)(e,z);return t?(0,S.jsx)(M.Resizable,{width:t,height:0,handle:(0,S.jsx)("span",{className:"react-resizable-handle",onClick:function(e){e.stopPropagation()}}),onResize:n,draggableOpts:{enableUserSelectHack:!1},children:(0,S.jsx)("th",(0,i.Z)((0,i.Z)({},a),{},{style:(0,i.Z)((0,i.Z)({},null===a||void 0===a?void 0:a.style),{},{userSelect:"none"})}))}):(0,S.jsx)("th",(0,i.Z)({},a))},V=function(e){var n=(0,o.useState)(!1),t=(0,c.Z)(n,2),r=t[0],l=t[1],u=(0,o.useState)({header:[],data:[]}),d=(0,c.Z)(u,2),h=d[0],p=d[1],Z=(0,o.useState)([]),v=(0,c.Z)(Z,2),y=v[0],b=v[1],k=(0,o.useState)(e.columns),_=(0,c.Z)(k,2),w=_[0],P=_[1],T=function(n){return function(t,r){var c=r.size;if(!(c.width<100)){var o=(0,a.Z)(w);o[n]=(0,i.Z)((0,i.Z)({},o[n]),{},{width:c.width});var l=o.reduce((function(e,n){return e+n.width||100}),0)+200;localStorage.setItem(e.tableKey||"",JSON.stringify(o)),L((0,i.Z)((0,i.Z)({},D),{},{x:l})),P(o)}}},M=w.map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{width:e.width||200,onHeaderCell:function(e){return{width:e.width,onResize:T(n)}}})})),z=(0,o.useState)(e.scroll),V=(0,c.Z)(z,2),D=V[0],L=V[1];(0,o.useEffect)((function(){P(e.columns)}),[e.columns]),(0,o.useEffect)((function(){L(e.scroll)}),[e.scroll]),(0,o.useEffect)((function(){if(e.dataSource){var n=e.columns.filter((function(e){return~y.indexOf(e.dataIndex)}));J(n,e.dataSource)}}),[e.dataSource,e.columns]);var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=e.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e})),a=e.map((function(e){return e.title})).filter((function(e){return"\u64cd\u4f5c"!==e})),r=[];n.forEach((function(e){var n={};t.map((function(t){var a=e[t];n[t]=a||""})),r.push(n)})),p({header:a,data:r})},K=function(){var e=h.header,n=h.data,t="";return e.length&&n.length?(t="|"+e.join("|")+"|\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+"|"+n.join("|")+"|\n"}))):t="",t},Y=function(){var e=h.header,n=h.data,t="";return e.length&&n.length?(t=e.join("\t")+"\n",n.forEach((function(e){var n=Object.values(e).map((function(e){return""===e?" ":e}));t=t+n.join("\t")+"\n"}))):t="",t};return(0,S.jsxs)(s.Z,{className:"tablebox",direction:"vertical",size:"middle",children:[(0,S.jsxs)(m.Z,{width:1e3,maskClosable:!1,centered:!0,bodyStyle:{maxHeight:500,overflow:"auto"},visible:r,title:"\u5bfc\u51fa\u6570\u636e",onCancel:function(){l(!1)},footer:null,children:[(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsxs)("div",{className:"mb16",children:[(0,S.jsx)("span",{className:"pr8",children:"\u9009\u62e9\u9700\u8981\u5bfc\u51fa\u7684\u5217\uff1a"}),(0,S.jsx)(C.Z.Group,{options:e.columns.map((function(e){return{label:e.title,value:e.dataIndex}})).filter((function(e){return"handle"!==e.value})),defaultValue:[],value:y,onChange:function(n){b(n);var t=e.columns.filter((function(e){return~n.indexOf(e.dataIndex)}));J(t,e.dataSource)}})]}),(0,S.jsxs)("div",{style:{position:"absolute",right:0,bottom:0},children:[(0,S.jsx)(g.Z,{size:"small",type:"link",onClick:function(){b(e.columns.map((function(e){return e.dataIndex})).filter((function(e){return"handle"!==e}))),J(e.columns,e.dataSource)},children:"\u5168\u9009"}),(0,S.jsx)(g.Z,{size:"small",type:"link",onClick:function(){b([]),J([],e.dataSource)},children:"\u53cd\u9009"})]})]}),(0,S.jsxs)(N.Z,{children:[(0,S.jsx)(N.Z.TabPane,{tab:"Wiki\u683c\u5f0f",children:(0,S.jsx)(H,{text:K(),onCopy:function(){return f.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,S.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,S.jsx)("code",{children:K()})})})},"jira"),(0,S.jsx)(N.Z.TabPane,{tab:"Text\u683c\u5f0f",children:(0,S.jsx)(H,{text:Y(),onCopy:function(){return f.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,S.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,S.jsx)("code",{children:Y()})})})},"test"),(0,S.jsx)(N.Z.TabPane,{tab:"Excel\u683c\u5f0f",children:(0,S.jsx)(x.Z,{justify:"center",align:"middle",style:{minHeight:100},children:(0,S.jsx)(j.Z,{children:(0,S.jsx)(g.Z,{type:"primary",onClick:function(){var e={fileName:"result"};e.datas=[{sheetData:h.data,sheetName:"sheet",sheetHeader:h.header}],new(E())(e).saveExcel()},children:"\u5bfc\u51faExcel"})})})},"excel")]})]}),e.titleNode||e.buttonNode||!e.cancelExportData?(0,S.jsxs)(x.Z,{justify:"space-between",align:"middle",children:[(0,S.jsx)(j.Z,{children:(0,S.jsx)(s.Z,{align:"center",children:e.titleNode})}),(0,S.jsx)(j.Z,{children:(0,S.jsxs)(s.Z,{align:"center",children:[e.buttonNode,e.cancelExportData?null:(0,S.jsx)(g.Z,{style:{marginLeft:6},onClick:function(){return l(!0)},children:"\u5bfc\u51fa\u6570\u636e"})]})})]}):null,(0,S.jsx)(O.ZP,{renderEmpty:F,children:(0,S.jsx)(I.Z,{size:e.size||"middle",rowKey:e.rowKey?e.rowKey:"id",dataSource:e.dataSource,components:{header:{cell:R}},columns:M,pagination:!1!==e.pagination&&(0,i.Z)({},e.pagination),scroll:D,loading:e.loading,onChange:e.onChange,rowSelection:e.rowSelection})})]})},D=t(3077),L=t.n(D),J=t(3405),K=t(7669),Y=t(3531),q=t(6713),B=t(8060),A=t(8718),G=t(332),W=t(6548),Q=t(8977),U=function(e){var n=Q.Z.useForm(),t=(0,c.Z)(n,1)[0],a=(0,o.useState)(),r=(0,c.Z)(a,2)[1];o.useCallback((function(){return r({})}),[]);(0,o.useEffect)((function(){e.formData&&t.setFieldsValue(e.formData)}),[e]);var i=(0,o.useState)({currentChange:{},allValues:{}}),l=(0,c.Z)(i,2),s=l[0],u=l[1];return(0,S.jsx)(m.Z,{destroyOnClose:!0,maskClosable:!1,width:e.width||680,visible:e.visible,title:e.title,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){t.resetFields(),e.onCancel()},onOk:function(){console.log(t.getFieldsValue()),t.validateFields().then((function(n){e.onCreate(n)})).catch((function(e){}))},children:(0,S.jsx)(v.Z,{spinning:e.loading,children:(0,S.jsx)(Q.Z,{onValuesChange:function(e,n){u({currentChange:e,allValues:n})},labelCol:{span:5},wrapperCol:{span:19},form:t,layout:"horizontal",name:"form_in_modal",children:e.children&&"[object Function]"===Object.prototype.toString.call(e.children)?e.children(t,s):e.children})})})},X=t(506),$=t(5861),ee=t(7757),ne=t.n(ee),te=t(7474),ae=t(7),re=t(8501),ie=t(2340),ce=te.Z.Option,oe=function(e){var n=Q.Z.useForm(),t=(0,c.Z)(n,1)[0],r=(0,o.useState)(!1),l=(0,c.Z)(r,2),s=l[0],u=l[1],d=(0,o.useState)([]),f=(0,c.Z)(d,2),m=(f[0],f[1],function(e){return(e||[]).map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{indexKey:n})}))}),h=(0,o.useState)(m(e.params)),p=(0,c.Z)(h,2),Z=p[0],v=p[1],y=(0,o.useState)(m(e.params)),b=(0,c.Z)(y,2),k=b[0],_=b[1],w=(0,o.useState)(new Map),C=(0,c.Z)(w,2),N=C[0],O=C[1];(0,o.useEffect)((function(){if(e.values){var n=e.values.length?e.values:[{key:void 0,value:void 0}];t.setFieldsValue({group:n});for(var r=(0,a.Z)(k),i=0;i<r.length;i++)for(var c=0;c<n.length;c++){void 0!==n[c]&&n[c].key===r[i].name&&(r[i].used=!0)}_(r)}}),[e.values]),(0,o.useEffect)((function(){if(e.params&&e.params.length){var n=m(e.params);v(n);for(var t=N,a=0;a<n.length;a++){var r=n[a];t.set(r.name,r)}O(t)}}),[e.params]);var I=function(){var n=(0,$.Z)(ne().mark((function n(t){var a,r;return ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(t),a=t.group.filter((function(e){return!!e.key})),r=a.map((function(e){return{key:e.key,value:e.value}})),e.onChange(r);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),P=function(e){var n=t.getFieldValue(["group",e,"key"]);if(!n)return(0,S.jsx)(ae.Z,{style:{width:"65%"},onPressEnter:function(){return T()}});var a=N.get(n);if("input"===(null===a||void 0===a?void 0:a.type))return(0,S.jsx)(ae.Z,{style:{width:"65%"},defaultValue:a.defalutValue,placeholder:a.placeHolder,onPressEnter:function(){return T()}});if("select"===(null===a||void 0===a?void 0:a.type)){var r=(null===a||void 0===a?void 0:a.option)||[];return(0,S.jsx)(te.Z,{style:{width:"65%"},dropdownMatchSelectWidth:500,showSearch:!0,mode:"label"===n?"multiple":void 0,optionFilterProp:"label",options:r.map((function(e){return{label:e.label,value:e.value}}))})}},T=function(){t.validateFields()};return(0,S.jsxs)(Q.Z,{className:"cmdb-mixsearch bg-title",form:t,onFinish:I,initialValues:{group:[{key:void 0,value:void 0}]},children:[(0,S.jsxs)(x.Z,{className:"cmdb-mixsearch-content",gutter:16,style:(0,i.Z)({marginLeft:0,marginRight:0},s?{height:70}:{height:"auto"}),children:[(0,S.jsx)(Q.Z.List,{name:"group",children:function(e,n){var r=n.add,i=n.remove;return(0,S.jsxs)(S.Fragment,{children:[e.map((function(e,n){return(0,S.jsx)(j.Z,{span:8,children:(0,S.jsxs)(x.Z,{align:"middle",gutter:8,children:[(0,S.jsx)(j.Z,{className:"cmdb-mixsearch-group",children:(0,S.jsxs)(ae.Z.Group,{compact:!0,children:[(0,S.jsx)(Q.Z.Item,{noStyle:!0,name:[e.name,"key"],rules:[{required:!1,message:"\u8bf7\u9009\u62e9key"}],children:(0,S.jsx)(te.Z,{style:{width:"35%"},placeholder:"\u8bf7\u9009\u62e9",onChange:function(e){!function(e){for(var n=(0,a.Z)(k),r=(t.getFieldValue("group")||[]).filter((function(e){return!!e})).map((function(e){return e.key})),i=0;i<n.length;i++){var c=n[i];c.name===e?n[i].used=!0:r.includes(c.name)||(n[i].used=!1)}_(n)}(e)},children:k.map((function(e,n){return(0,S.jsx)(ce,{style:{display:e.used?"none":"inherit"},value:e.name,children:e.title||e.name},"mixSearch_".concat(e.name,"_").concat(n))}))})}),(0,S.jsx)(Q.Z.Item,{noStyle:!0,shouldUpdate:!0,name:[e.name,"value"],rules:[{required:!1,message:"\u8bf7\u586b\u5199value"}],children:P(n)})]})}),(0,S.jsx)(j.Z,{className:"cmdb-mixsearch-delete",onClick:function(){var e=(t.getFieldValue("group")||[]).map((function(e){return e?e.key:void 0})),r=(0,a.Z)(k);if(e[n])for(var c=0;c<r.length;c++){r[c].name===e[n]&&(r[c].used=!1)}_(r),i(n)},children:(0,S.jsx)(re.Z,{})})]})},"mixSearch_".concat(e.key,"_").concat(n))})),Z.length!==e.length&&(0,S.jsx)(j.Z,{className:"cmdb-mixsearch-add d-il",onClick:function(){r()},children:(0,S.jsx)(B.Z,{})})]})}}),(0,S.jsx)(j.Z,{flex:1,children:(0,S.jsx)(x.Z,{justify:"end",children:(0,S.jsx)(g.Z,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})})]}),(0,S.jsx)(x.Z,{className:"cmdb-mixsearch-collapsed",children:(0,S.jsx)(x.Z,{onClick:function(){u(!s)},justify:"center",align:"middle",children:s?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.Z,{children:"\u5c55\u5f00"}),(0,S.jsx)(j.Z,{children:(0,S.jsx)(K.Z,{})})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.Z,{children:"\u6536\u8d77"}),(0,S.jsx)(j.Z,{children:(0,S.jsx)(ie.Z,{})})]})})})]})},le=t(3877);function se(e){var n=(0,G.s0)(),t=(0,G.TH)(),b=(0,o.useState)([]),k=(0,c.Z)(b,2),w=k[0],C=k[1],N=(0,o.useState)(!0),O=(0,c.Z)(N,2),I=O[0],P=O[1],T=(0,o.useState)(!1),E=(0,c.Z)(T,2),M=E[0],z=E[1],H=(0,o.useState)(!1),F=(0,c.Z)(H,2),R=F[0],D=F[1],Q=(0,o.useState)(!1),$=(0,c.Z)(Q,2),ee=$[0],ne=$[1],te=(0,o.useState)(!1),ae=(0,c.Z)(te,2),re=ae[0],ie=ae[1],ce=(0,o.useState)(!1),se=(0,c.Z)(ce,2),ue=se[0],de=se[1],fe=(0,o.useState)(!1),me=(0,c.Z)(fe,2),he=me[0],pe=me[1],Ze=(0,o.useState)(!1),ve=(0,c.Z)(Ze,2),xe=ve[0],je=ve[1],ge=(0,o.useState)(),ye=(0,c.Z)(ge,2),be=ye[0],Se=ye[1],ke=(0,o.useState)(),_e=(0,c.Z)(ke,2),we=_e[0],Ce=_e[1],Ne=(0,o.useState)([]),Oe=(0,c.Z)(Ne,2),Ie=Oe[0],Pe=Oe[1],Te=(0,o.useState)({startTime:L()().subtract(1,"d").startOf("day").format("YYYY-MM-DD HH:mm:ss"),endTime:L()().subtract(1,"d").endOf("day").format("YYYY-MM-DD HH:mm:ss")}),Ee=(0,c.Z)(Te,2),Me=(Ee[0],Ee[1],{current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:[10,20,50,100,500],showTotal:function(e){return"\u5171".concat(e,"\u6761")}}),ze=(0,o.useState)(Me),He=(0,c.Z)(ze,2),Fe=He[0],Re=He[1],Ve=(0,o.useState)([]),De=(0,c.Z)(Ve,2),Le=De[0],Je=De[1],Ke=(0,o.useState)([]),Ye=(0,c.Z)(Ke,2),qe=Ye[0],Be=Ye[1],Ae=(0,o.useState)([]),Ge=(0,c.Z)(Ae,2),We=Ge[0],Qe=Ge[1],Ue=(0,o.useRef)(We),Xe=function(e){Ue.current=e,Qe(e)},$e=(0,o.useState)([]),en=(0,c.Z)($e,2),nn=en[0],tn=en[1],an=(0,o.useState)([]),rn=(0,c.Z)(an,2),cn=rn[0],on=rn[1],ln=(0,o.useState)([]),sn=(0,c.Z)(ln,2),un=sn[0],dn=sn[1],fn=(0,o.useState)([]),mn=(0,c.Z)(fn,2),hn=mn[0],pn=mn[1],Zn=(0,o.useState)({}),vn=(0,c.Z)(Zn,2),xn=vn[0],jn=vn[1],gn=(0,o.useState)({}),yn=(0,c.Z)(gn,2),bn=yn[0],Sn=yn[1],kn=(0,o.useRef)(bn),_n=(0,o.useState)([]),wn=(0,c.Z)(_n,2),Cn=wn[0],Nn=wn[1],On=(0,o.useState)(1e3),In=(0,c.Z)(On,2),Pn=In[0],Tn=In[1],En=(0,o.useState)([]),Mn=(0,c.Z)(En,2),zn=Mn[0],Hn=Mn[1],Fn=(0,o.useState)({}),Rn=(0,c.Z)(Fn,2),Vn=Rn[0],Dn=Rn[1],Ln=(0,o.useState)(),Jn=(0,c.Z)(Ln,2),Kn=Jn[0],Yn=Jn[1],qn=(0,o.useState)(),Bn=(0,c.Z)(qn,2),An=Bn[0],Gn=Bn[1],Wn=(0,o.useRef)(An),Qn=(0,o.useState)(!1),Un=(0,c.Z)(Qn,2),Xn=Un[0],$n=Un[1],et=(0,o.useState)([]),nt=(0,c.Z)(et,2),tt=nt[0],at=nt[1],rt=(0,o.useState)([]),it=(0,c.Z)(rt,2),ct=it[0],ot=it[1],lt=(0,o.useState)(),st=(0,c.Z)(lt,2),ut=st[0],dt=st[1],ft=(0,o.useState)(""),mt=(0,c.Z)(ft,2),ht=mt[0],pt=mt[1],Zt=(0,o.useState)(""),vt=(0,c.Z)(Zt,2),xt=vt[0],jt=vt[1],gt=(0,o.useState)(""),yt=(0,c.Z)(gt,2),bt=yt[0],St=yt[1],kt={pageConf:Me,params:[],paramsMap:Vn,sorter:void 0};(0,o.useEffect)((function(){St((0,W.W9)())}),[]),(0,o.useEffect)((function(){var e=encodeURIComponent(t.pathname);(0,X.se)(e).then((function(e){var n=e.data,t=n.title,a=n.content,r=n.hit;Se(t),Ce(a),je(r)})).catch((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){var o=(0,W.jS)("targetId"),h=o?"/dimension_remote_table_modelview/".concat(o,"/api/"):null===e||void 0===e?void 0:e.url;(0,X.BQ)(h).then((function(o){var h=o.data,p=h.list_columns,Z=h.label_columns,v=h.filters,x=h.add_columns,j=h.edit_columns,g=h.permissions,y=h.description_columns,b=h.add_fieldsets,k=h.edit_fieldsets,_=h.help_url,w=h.order_columns,C=h.action,N=h.route_base,O=h.column_related,I=h.primary_key,P=h.label_title,T=h.cols_width,E=h.import_data,M=(null===e||void 0===e?void 0:e.related)||g.includes("can_show")||g.includes("can_edit")||g.includes("can_delete"),z=localStorage.getItem("tablebox_".concat(t.pathname)),H=JSON.parse(z||"[]").reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.dataIndex,n.width))}),{}),F=Object.entries(O||{}).reduce((function(e,n){var t=(0,c.Z)(n,2),o=(t[0],t[1]);return[].concat((0,a.Z)(e),[{dep:o.src_columns,effect:o.des_columns.join(""),effectOption:o.related.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},(0,le.a)(n.src_value),n.des_value.map((function(e){return{label:e,value:e}}))))}),{})}])}),[]),R=p.map((function(e){return{title:Z[e]||e,dataIndex:e,key:e,sorter:w.includes(e)?function(n,t){return n[e]-t[e]}:void 0,render:function(n,t){var r;if(void 0===n||""===n)return"-";if(T[e]&&-1!==(null===(r=T[e].type)||void 0===r?void 0:r.indexOf("ellip")))return(0,S.jsx)(l.Z,{title:(0,S.jsx)("span",{className:"tips-content",dangerouslySetInnerHTML:{__html:n}}),placement:"topLeft",children:(0,S.jsx)("div",{className:T[e].type,dangerouslySetInnerHTML:{__html:n}})});if("[object Object]"===Object.prototype.toString.call(n)){var i=Object.entries(n).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{label:r,value:i}])}),[]);return i.length?(0,S.jsx)("div",{style:{overflow:"auto",maxHeight:100},children:i.map((function(e,n){return(0,S.jsxs)("div",{children:[Z[e.label]||e.label,":",e.value]},"table_itemvalue_".concat(n))}))}):"-"}return(0,S.jsx)("div",{style:{overflow:"auto",maxHeight:100},dangerouslySetInnerHTML:{__html:n}})},width:H[e]||T[e]&&T[e].width||100}})),V=Object.entries(C||{}).reduce((function(e,n){var t=(0,c.Z)(n,2),r=(t[0],t[1]);return[].concat((0,a.Z)(e),[(0,i.Z)({},r)])}),[]),D=V.filter((function(e){return!!e.multiple})),L=V.filter((function(e){return!!e.single})),Y=function e(n){return n.map((function(n,t){var a=n["ui-type"]||"input";"select2"===a&&(a="select");var r=n.label||Z[n.name],i=(n.validators||[]).map((function(e){switch(e.type){case"DataRequired":return{required:!0,message:"\u8bf7\u8f93\u5165".concat(r)};case"Regexp":return{pattern:new RegExp("".concat(e.regex)),message:"\u8bf7\u6309\u6b63\u786e\u7684\u89c4\u5219\u8f93\u5165"};case"Length":return{min:e.min,max:e.max,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u957f\u5ea6"};default:return}})).filter((function(e){return!!e})),c=e(n.info||[]);return{label:r,type:a,rules:i,list:c,name:n.name,disable:n.disable,description:n.description||y[n.name]||void 0,required:n.required,defaultValue:""===n.default?void 0:n.default,multiple:n["ui-type"]&&"select2"===n["ui-type"],options:(n.values||[]).map((function(e){return{label:e.value,value:e.id}}))}}))},q={title:"\u64cd\u4f5c",width:80,dataIndex:"handle",key:"handle",align:"right",fixed:"right",render:function(a,r){var c;return(0,S.jsx)(s.Z,{size:"middle",children:M?(0,S.jsx)(u.Z,{overlay:(0,S.jsxs)(d.Z,{children:[g.includes("can_show")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){pe(!0),wt(r[I])},children:"\u8be6\u60c5"})}):null,g.includes("can_edit")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){ie(!0),(0,X.BQ)(N,r[I]).then((function(e){var n=e.data.edit_columns,t=Y(n),a=k.map((function(e){var n=e.fields.map((function(e){return G[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:Y(n)}}));console.log(t),on(t),pn(a),wt(r[I])})).catch((function(){f.ZP.warn("\u7528\u6237\u6ca1\u6709\u4fee\u6539\u6743\u9650")}))},children:"\u4fee\u6539"})}):null,g.includes("can_delete")?(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"c-fail cp",onClick:function(){m.Z.confirm({title:"\u5220\u9664",icon:(0,S.jsx)(J.Z,{}),content:"\u786e\u5b9a\u5220\u9664?",okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:function(){return new Promise((function(e,n){(0,X.aM)("".concat(N).concat(r[I])).then((function(n){e("")})).catch((function(e){n()}))})).then((function(e){f.ZP.success("\u5220\u9664\u6210\u529f"),console.log(Ue.current),_t((0,i.Z)((0,i.Z)({},kt),{},{pageConf:Fe,params:Ue.current,paramsMap:v}))})).catch((function(){f.ZP.error("\u5220\u9664\u5931\u8d25")}))},onCancel:function(){}})},children:"\u5220\u9664"})}):null,null===e||void 0===e||null===(c=e.related)||void 0===c?void 0:c.map((function(e,a){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){n("".concat(t.pathname,"/").concat(e.name,"?id=").concat(r[I]))},children:e.title})},"moreAction_".concat(a))})),!!L.length&&L.map((function(e,n){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("div",{className:"link",onClick:function(){m.Z.confirm({title:e.confirmation,icon:(0,S.jsx)(J.Z,{}),content:"",okText:"\u786e\u8ba4".concat(e.confirmation),cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(n,t){(0,X.y5)("".concat(N,"action/").concat(e.name,"/").concat(r[I])).then((function(e){n("")})).catch((function(e){t()}))})).then((function(e){f.ZP.success("\u64cd\u4f5c\u6210\u529f"),_t((0,i.Z)((0,i.Z)({},kt),{},{pageConf:Fe,params:Ue.current,paramsMap:v}))})).catch((function(){f.ZP.error("\u64cd\u4f5c\u5931\u8d25")}))},onCancel:function(){}})},children:e.text})},"table_action_".concat(n))}))]}),children:(0,S.jsxs)("div",{className:"link",children:["\u66f4\u591a",(0,S.jsx)(K.Z,{})]})}):null})}},B=(0,a.Z)(R);M&&B.push(q);var A=x.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{}),G=j.reduce((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.name,n))}),{}),Q=Y(x),U=b.map((function(e){var n=e.fields.map((function(e){return A[e]})).filter((function(e){return!!e}));return{group:e.group,expanded:e.expanded,config:Y(n)}})),$=Object.entries(v).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{name:r,type:i["ui-type"]||"input",title:Z[r],oprList:i.filter.map((function(e){return e.operator})),defalutValue:""===i.default?void 0:i.default,option:i.values?i.values.map((function(e){return{label:e.value,value:e.id}})):void 0}])}),[]),ee=Object.entries(v).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],i=t[1];return[].concat((0,a.Z)(e),[{key:r,value:i.default}])}),[]).filter((function(e){return e.value})),ne=JSON.parse(localStorage.getItem("filter_".concat(t.pathname).concat(t.search))||"[]"),te=void 0;if((0,W.jS)("filter"))try{te=JSON.parse((0,W.jS)("filter")||"[]")}catch(oe){f.ZP.error("filter\u89e3\u6790\u5f02\u5e38")}var ae,re=te||ne;re&&re.length&&(ee=re),$n(E),jt(P),pt(I),at(F),ot(D),ae=N,Wn.current=ae,Gn(ae),jn(G),Dn(v),Je(B),Be($),tn(Q),dn(U),function(e){kn.current=e,Sn(e)}(Z),Hn(g);var ce=z?B.reduce((function(e,n){return e+n.width||100}),0)+80:100*B.length+80+80;Tn(ce),Yn(_),Xe(ee),_t({pageConf:Me,params:ee,paramsMap:v,sorter:void 0})}))}),[]);var _t=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageConf:Me,params:We,paramsMap:Vn,sorter:void 0},t=n.pageConf,r=n.params,c=n.paramsMap,o=n.sorter;P(!0);var l=void 0,s=(0,W.jS)("id");l=JSON.stringify((0,i.Z)({str_related:1,filters:[s?{col:null===e||void 0===e?void 0:e.model_name,opr:"rel_o_m",value:+s}:void 0].concat((0,a.Z)(r.filter((function(e){return void 0!==e.value})).map((function(e){console.log(c[e.key]);var n="";if(!isNaN(+e.value)&&c[e.key]&&"Related"!==c[e.key].type&&"QuerySelect"!==c[e.key].type)n="eq";else for(var t=["ct","lt","eq","rel_o_m"],a=c[e.key].filter.map((function(e){return e.operator}))||[],r=0;r<t.length;r++){var i=t[r];if(a.includes(i)){n=i;break}}return{col:e.key,opr:n,value:e.value}})))).filter((function(e){return!!e})),page:(t.current||1)-1,page_size:t.pageSize||10},o)),(0,X.jm)(Wn.current,{form_data:l}).then((function(e){var n=e.data.result,a=n.count,r=n.data;C(r),Pe([]),Re((0,i.Z)((0,i.Z)((0,i.Z)({},Me),t),{},{total:a})),dt(o)})).catch((function(e){console.log(e)})).finally((function(){return P(!1)}))},wt=function(e){de(!0),Nn([]),(0,X.kI)("".concat(Wn.current).concat(e)).then((function(e){var n=e.data.result,t=[],a=function(e){return"[object Object]"===Object.prototype.toString.call(e)?e.last_name:e};Object.keys(n).forEach((function(e){t.push({label:kn.current[e]||e,value:a(n[e]),key:e})})),Nn(t)})).catch((function(e){})).finally((function(){de(!1)}))},Ct={name:"csv_file",maxCount:1,action:"".concat(An,"upload/"),headers:{authorization:"authorization-text"},beforeUpload:function(e){var n=-1!==e.name.indexOf(".csv");return n||f.ZP.error("".concat(e.name," \u5e76\u4e0d\u662fcsv\u6587\u4ef6")),n||h.Z.LIST_IGNORE},onChange:function(e){"done"===e.file.status?p.Z.success({message:"\u5bfc\u5165\u6210\u529f",description:JSON.stringify(e.file.response)}):"error"===e.file.status&&p.Z.error({message:"\u5bfc\u5165\u5931\u8d25",description:JSON.stringify(e.file.response)})}};return(0,S.jsxs)("div",{className:"fade-in",children:[(0,S.jsx)(Z.Z,{contentWrapperStyle:{width:"auto"},title:be,placement:"right",onClose:function(){je(!1)},visible:xe,children:(0,S.jsx)("div",{dangerouslySetInnerHTML:{__html:we||""}})}),(0,S.jsx)(U,{title:"\u6dfb\u52a0".concat(xt),width:800,loading:M,visible:R,onCancel:function(){D(!1)},onCreate:function(e){for(var n in z(!0),e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=e[n];if(Array.isArray(t)){if(t[0]&&"[object Object]"===Object.prototype.toString.call(t[0]))continue;e[n]=e[n].join(",")}}(0,X.P9)(Wn.current,e).then((function(e){f.ZP.success("\u6dfb\u52a0".concat(xt,"\u6210\u529f")),D(!1),_t((0,i.Z)((0,i.Z)({},kt),{},{pageConf:Fe,params:We,sorter:ut,paramsMap:Vn}))})).catch((function(e){f.ZP.error("\u6dfb\u52a0".concat(xt,"\u5931\u8d25"))})).finally((function(){z(!1)}))},children:function(e,n){return(0,S.jsx)(le.Z,{form:e,formChangeRes:n,linkageConfig:tt,config:nn,configGroup:un})}}),(0,S.jsx)(U,{title:"\u4fee\u6539".concat(xt),width:800,formData:Cn.reduce((function(e,n){if("select"===(xn[n.key]||{})["ui-type"]){var t=n.value,a=(xn[n.key]||{}).values||[],c=a.map((function(e){return e.value})).indexOf(n.value);return~c&&(t=a[c].id),(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,t))}return"select2"===(xn[n.key]||{})["ui-type"]?(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,(n.value||"").split(","))):(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n.key,n.value))}),{}),loading:ee||ue,visible:re,onCancel:function(){ie(!1)},onCreate:function(e){for(var n in ne(!0),Nn([]),e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=e[n];if(Array.isArray(t)){if(t[0]&&"[object Object]"===Object.prototype.toString.call(t[0]))continue;e[n]=e[n].join(",")}}(0,X.a1)("".concat(Wn.current).concat(e[ht]),e).then((function(e){f.ZP.success("\u66f4\u65b0".concat(xt,"\u6210\u529f")),ie(!1),_t((0,i.Z)((0,i.Z)({},kt),{},{pageConf:Fe,params:We,sorter:ut,paramsMap:Vn}))})).catch((function(e){f.ZP.error("\u66f4\u65b0".concat(xt,"\u5931\u8d25"))})).finally((function(){ne(!1)}))},children:function(e){return(0,S.jsx)(le.Z,{form:e,primaryKey:ht,config:cn,linkageConfig:tt,configGroup:hn})}}),(0,S.jsx)(m.Z,{title:"".concat(xt,"\u8be6\u60c5"),visible:he,footer:null,width:800,destroyOnClose:!0,onCancel:function(){pe(!1)},children:(0,S.jsx)(v.Z,{spinning:ue,children:(0,S.jsx)("div",{className:"pb32",style:{minHeight:300},children:Cn.map((function(e,n){return(0,S.jsxs)(x.Z,{className:"mb16",children:[(0,S.jsx)(j.Z,{span:6,children:(0,S.jsx)("div",{className:"ta-r",children:(0,S.jsxs)("strong",{children:[e.label,"\uff1a"]})})}),(0,S.jsx)(j.Z,{span:18,children:(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.value}})})]},"dataDetail_".concat(n))}))})})}),(0,S.jsx)(_,{title:(0,S.jsxs)(S.Fragment,{children:[null!==e&&void 0!==e&&e.isSubRoute||(0,W.jS)("targetId")?(0,S.jsxs)(g.Z,{className:"mr16",onClick:function(){n("/data/metadata/metadata_dimension"),window.location.reload()},children:[(0,S.jsx)(Y.Z,{}),"\u8fd4\u56de"]}):null,(0,S.jsx)("span",{children:xt})]}),breadcrumbs:((null===e||void 0===e?void 0:e.breadcrumbs)||[]).map((function(n,t){return(0,S.jsxs)("span",{className:"c-hint-b fs12",children:["/",(0,S.jsx)("span",{className:"plr2",children:n})]},"templateTitle_".concat(null===e||void 0===e?void 0:e.name,"_").concat(t))})),children:Kn?(0,S.jsxs)("div",{className:"link",children:[(0,S.jsx)("span",{className:"pr4",onClick:function(){window.open(Kn,"blank")},children:"\u5e2e\u52a9\u94fe\u63a5"}),(0,S.jsx)(q.Z,{})]}):null}),(0,S.jsxs)(y.VY,{className:"appmgmt-content bg-title",children:[!!qe.length&&(0,S.jsx)(oe,{values:We,params:qe,onChange:function(e){localStorage.setItem("filter_".concat(t.pathname).concat(t.search),JSON.stringify(e)),Xe(e),_t((0,i.Z)((0,i.Z)({},kt),{},{pageConf:Me,params:e,sorter:ut,paramsMap:Vn}))}}),(0,S.jsx)("div",{className:"m16",children:(0,S.jsx)(V,{tableKey:"tablebox_".concat(t.pathname),titleNode:(0,S.jsxs)(j.Z,{className:"tablebox-title",children:[xt,"\u5217\u8868"]}),buttonNode:(0,S.jsxs)("div",{className:"d-f ac",children:[zn.includes("can_add")?(0,S.jsxs)(g.Z,{className:"mr16",type:"primary",onClick:function(){return D(!0)},children:["\u6dfb\u52a0",xt,(0,S.jsx)(B.Z,{})]}):null,(0,S.jsx)("div",{children:(0,S.jsx)(u.Z,{overlay:(0,S.jsx)(d.Z,{children:ct.map((function(e,n){return(0,S.jsx)(d.Z.Item,{children:(0,S.jsx)("span",{className:"link",onClick:function(){return function(e){Ie.length?m.Z.confirm({title:e.confirmation,icon:(0,S.jsx)(J.Z,{}),content:"",okText:"\u786e\u8ba4".concat(e.confirmation),cancelText:"\u53d6\u6d88",onOk:function(){return new Promise((function(n,t){(0,X.Eb)("".concat(Wn.current,"multi_action/").concat(e.name),{ids:Ie.map((function(e){return JSON.parse(e||"{}")[ht]}))}).then((function(e){n("")})).catch((function(e){t()}))})).then((function(e){f.ZP.success("\u64cd\u4f5c\u6210\u529f"),_t((0,i.Z)((0,i.Z)({},kt),{},{pageConf:Fe,params:We,sorter:ut,paramsMap:Vn}))})).catch((function(){f.ZP.error("\u64cd\u4f5c\u5931\u8d25")}))},onCancel:function(){}}):f.ZP.warn("\u8bf7\u5148\u9009\u62e9")}(e)},children:"\u6279\u91cf".concat(e.text)})},"table_muliple_".concat(n))}))}),children:(0,S.jsxs)(g.Z,{children:["\u6279\u91cf\u64cd\u4f5c ",(0,S.jsx)(K.Z,{})]})})}),Xn?(0,S.jsx)("div",{className:"d-f ml16",children:(0,S.jsx)(l.Z,{title:(0,S.jsx)("span",{className:"tips-content",children:"\u6ce8\u610f\uff1acsv\u9017\u53f7\u5206\u9694\uff0c\u7b2c\u4e00\u884c\u4e3a\u5217\u7684\u82f1\u6587\u540d"}),placement:"topLeft",children:(0,S.jsx)(h.Z,(0,i.Z)((0,i.Z)({},Ct),{},{children:(0,S.jsx)(g.Z,{className:"",icon:(0,S.jsx)(A.Z,{}),children:"\u5bfc\u5165\u6570\u636e"})}))})}):null]}),rowKey:function(e){return JSON.stringify(e)},columns:Le,loading:I,pagination:Fe,dataSource:w,onChange:function(e,n,t){var a=t.order?{order_column:t.columnKey,order_direction:"ascend"===t.order?"asc":"desc"}:void 0;_t((0,i.Z)((0,i.Z)({},kt),{},{pageConf:e,params:We,paramsMap:Vn,sorter:a}))},rowSelection:{type:"checkbox",fixed:"left",columnWidth:80,selectedRowKeys:Ie,onChange:function(e){Pe(e)}},scroll:{x:Pn,y:bt}})})]})]})}},602:function(e,n,t){e.exports=t.p+"static/media/emptyBg.15fdf5f39309784ac66e.png"}}]);
//# sourceMappingURL=672.edec9d2f.chunk.js.map